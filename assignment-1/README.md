\# Assignment 1 - Гетерогенная параллелизация на C++



Этот проект содержит 4 задания по работе с динамической памятью и параллельным программированием с использованием OpenMP.



\## Содержание



\- \*\*Задание 1\*\*: Динамический массив из 50 000 элементов, вычисление среднего значения

\- \*\*Задание 2\*\*: Последовательный поиск минимума и максимума в массиве из 1 000 000 элементов

\- \*\*Задание 3\*\*: Параллельный поиск минимума и максимума с OpenMP, сравнение с последовательной версией

\- \*\*Задание 4\*\*: Вычисление среднего значения массива из 5 000 000 элементов с использованием OpenMP reduction



\## Требования



\### Для Windows



1\. Компилятор GCC с поддержкой OpenMP (MinGW-w64 или MSYS2)

2\. Или Microsoft Visual Studio с поддержкой OpenMP



\### Для Linux



1\. Компилятор GCC (обычно уже установлен)

2\. Пакет с OpenMP (обычно включен в GCC)



\### Для macOS



1\. Компилятор GCC или Clang с поддержкой OpenMP

2\. Установить через Homebrew: `brew install libomp`



\## Установка компилятора



\### Windows



\*\*Вариант 1: MinGW-w64\*\*

1\. Скачай MinGW-w64 с официального сайта: https://www.mingw-w64.org/

2\. Установи, выбрав архитектуру x86\_64

3\. Добавь путь к папке `bin` в переменную PATH



\*\*Вариант 2: MSYS2\*\*

1\. Скачай MSYS2: https://www.msys2.org/

2\. Установи и запусти MSYS2

3\. Выполни команду: `pacman -S mingw-w64-x86\_64-gcc`



\*\*Вариант 3: Visual Studio\*\*

1\. Установи Visual Studio Community (бесплатно)

2\. При установке выбери "Разработка классических приложений на C++"



\### Linux (Ubuntu/Debian)



```bash

sudo apt update

sudo apt install g++ build-essential

```



\### Linux (Fedora/CentOS)



```bash

sudo dnf install gcc-c++

```



\### macOS



```bash

\# установи homebrew если еще не установлен

/bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"



\# установи gcc с openmp

brew install gcc libomp

```



\## Компиляция программ



\### Задание 1



\*\*Windows (MinGW):\*\*

```bash

g++ task1.cpp -o task1.exe

```



\*\*Linux/macOS:\*\*

```bash

g++ task1.cpp -o task1

```



\### Задание 2



\*\*Windows (MinGW):\*\*

```bash

g++ task2.cpp -o task2.exe

```



\*\*Linux/macOS:\*\*

```bash

g++ task2.cpp -o task2

```



\### Задание 3 (требует OpenMP)



\*\*Windows (MinGW):\*\*

```bash

g++ -fopenmp task3.cpp -o task3.exe

```



\*\*Windows (Visual Studio через командную строку):\*\*

```bash

cl /openmp task3.cpp

```



\*\*Linux/macOS:\*\*

```bash

g++ -fopenmp task3.cpp -o task3

```



\### Задание 4 (требует OpenMP)



\*\*Windows (MinGW):\*\*

```bash

g++ -fopenmp task4.cpp -o task4.exe

```



\*\*Windows (Visual Studio через командную строку):\*\*

```bash

cl /openmp task4.cpp

```



\*\*Linux/macOS:\*\*

```bash

g++ -fopenmp task4.cpp -o task4

```



\## Запуск программ



\### Windows



```bash

task1.exe

task2.exe

task3.exe

task4.exe

```



\### Linux/macOS



```bash

./task1

./task2

./task3

./task4

```



\## Компиляция всех программ одной командой



\### Windows (MinGW)



```bash

g++ task1.cpp -o task1.exe \&\& g++ task2.cpp -o task2.exe \&\& g++ -fopenmp task3.cpp -o task3.exe \&\& g++ -fopenmp task4.cpp -o task4.exe

```



\### Linux/macOS



```bash

g++ task1.cpp -o task1 \&\& g++ task2.cpp -o task2 \&\& g++ -fopenmp task3.cpp -o task3 \&\& g++ -fopenmp task4.cpp -o task4

```



\## Настройка количества потоков OpenMP



По умолчанию OpenMP использует все доступные ядра процессора. Чтобы изменить количество потоков:



\### Windows



```bash

set OMP\_NUM\_THREADS=4

task3.exe

```



\### Linux/macOS



```bash

export OMP\_NUM\_THREADS=4

./task3

```



\## Ожидаемые результаты



\### Задание 1

Программа выведет размер массива, сумму всех элементов и среднее значение.



\### Задание 2

Программа выведет минимальное и максимальное значения, а также время выполнения последовательного алгоритма в микросекундах.



\### Задание 3

Программа выведет результаты последовательного и параллельного поиска минимума/максимума, время выполнения обеих версий и ускорение (speedup).



\### Задание 4

Программа выведет результаты последовательного и параллельного вычисления среднего, время выполнения обеих версий, ускорение и проверку корректности (совпадение сумм).



\## Типичные проблемы и решения



\### Ошибка: "g++ не является внутренней или внешней командой"



\*\*Решение:\*\* Компилятор не установлен или не добавлен в PATH. Проверь установку компилятора и добавь путь к нему в системную переменную PATH.



\### Ошибка: "undefined reference to `omp\_get\_num\_threads`"



\*\*Решение:\*\* Забыл добавить флаг `-fopenmp` при компиляции. Используй:

```bash

g++ -fopenmp task3.cpp -o task3

```



\### Программа компилируется, но не дает ускорения в заданиях 3 и 4



\*\*Возможные причины:\*\*

1\. OpenMP не поддерживается компилятором - проверь флаг `-fopenmp`

2\. Мало ядер процессора - на 1-2 ядрах ускорение минимальное

3\. Слишком маленький массив - попробуй увеличить размер



\### На macOS ошибка с OpenMP



\*\*Решение:\*\* Стандартный clang на macOS не поддерживает OpenMP. Установи gcc:

```bash

brew install gcc

g++-13 -fopenmp task3.cpp -o task3

```

(замени `g++-13` на актуальную версию gcc в твоей системе)



\## Структура проекта



```

assignment1/

├── task1.cpp           # Задание 1: динамический массив

├── task2.cpp           # Задание 2: последовательный поиск min/max

├── task3.cpp           # Задание 3: параллельный поиск min/max

├── task4.cpp           # Задание 4: параллельное вычисление среднего

├── theory.md           # Теоретическая часть

├── answers.md          # Ответы на контрольные вопросы

├── flowcharts/         # Блок-схемы алгоритмов

│   ├── task1.png

│   ├── task2.png

│   ├── task3.png

│   └── task4.png

└── README.md           # Этот файл

```



\## Дополнительные флаги компиляции



Для оптимизации производительности можешь добавить флаги:



```bash

\# базовая оптимизация

g++ -O2 -fopenmp task3.cpp -o task3



\# максимальная оптимизация

g++ -O3 -fopenmp task3.cpp -o task3



\# с отладочной информацией

g++ -g -fopenmp task3.cpp -o task3

```



\## Автор



Этот проект выполнен в рамках курса по параллельному программированию.



\## Лицензия



Свободное использование в учебных целях.

